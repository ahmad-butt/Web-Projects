{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/ahmad/University/JavaScript/messenger-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React from'react';import{useState,useEffect}from'react';import{Button,Input,InputLabel,Modal}from'@material-ui/core';import{FormControl}from'@material-ui/core';import Message from'./Components/Message';import{db,auth}from'./firebase';import firebase from'firebase';import FlipMove from'react-flip-move';import SendIcon from'@material-ui/icons/Send';import{IconButton}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';function App(){var _React$useState=React.useState(getModalStyle),_React$useState2=_slicedToArray(_React$useState,1),modalStyle=_React$useState2[0];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),openSignUp=_useState10[0],setOpenSignUp=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),openSignIn=_useState12[0],setOpenSignIn=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),input=_useState14[0],setInput=_useState14[1];var _useState15=useState([{username:'',message:''}]),_useState16=_slicedToArray(_useState15,2),messages=_useState16[0],setMessages=_useState16[1];useEffect(function(){db.collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){setMessages(snapshot.docs.map(function(doc){return{id:doc.id,message:doc.data()};}));});},[]);var handleChange=function handleChange(event){var inp=event.target.value;setInput(inp);};var sendMessage=function sendMessage(event){event.preventDefault();// To Add messages Locally\n// setMessages([...messages, {username:username, text:input}]);\n//To add messages from Database\ndb.collection('messages').add({message:input,username:user===null||user===void 0?void 0:user.displayName,email:user===null||user===void 0?void 0:user.email,timestamp:firebase.firestore.FieldValue.serverTimestamp()});setInput('');};useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(authUser){if(authUser){setUser(authUser);}else{setUser(null);}});return function(){unsubscribe();};},[]);var signUp=function signUp(event){event.preventDefault();auth.createUserWithEmailAndPassword(email,password).then(function(authUser){return authUser.user.updateProfile({displayName:username});}).catch(function(error){alert(error.message);});setOpenSignUp(false);setEmail('');setUsername('');setPassword('');};var signIn=function signIn(event){event.preventDefault();auth.signInWithEmailAndPassword(email,password).catch(function(error){return alert(error.message);});setOpenSignIn(false);setEmail('');setPassword('');};// ******************************Material Ui Modal styling******************************\nfunction getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:{position:'absolute',width:400,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});var classes=useStyles();// ******************************************************************************************\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[user?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app__header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://seeklogo.com/images/F/facebook-messenger-logo-36376366E2-seeklogo.com.png?w=100&h=100\",alt:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Messenger Clone \\uD83D\\uDD25\\uD83D\\uDD25\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome \",user===null||user===void 0?void 0:user.displayName]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app__button2\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:function onClick(){return auth.signOut();},children:\"Log Out\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"app__form\",children:/*#__PURE__*/_jsxs(FormControl,{className:\"app__formControl\",children:[/*#__PURE__*/_jsx(InputLabel,{className:\"app__inputLabel\",children:\"Type Message\"}),/*#__PURE__*/_jsx(Input,{value:input,onChange:handleChange}),/*#__PURE__*/_jsx(IconButton,{className:\"app__button\",disabled:!input,type:\"submit\",onClick:sendMessage,color:\"primary\",variant:\"contained\",children:/*#__PURE__*/_jsx(SendIcon,{})})]})}),/*#__PURE__*/_jsx(FlipMove,{children:messages.map(function(_ref){var id=_ref.id,message=_ref.message;return/*#__PURE__*/_jsx(Message,{username:user===null||user===void 0?void 0:user.displayName,email:user===null||user===void 0?void 0:user.email,user:user,message:message},id);})})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app__header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://seeklogo.com/images/F/facebook-messenger-logo-36376366E2-seeklogo.com.png?w=100&h=100\",alt:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Messenger Clone \\uD83D\\uDD25\\uD83D\\uDD25\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Sign Up for free or Sign In to Chat \\uD83D\\uDD25\\uD83D\\uDD25\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"app__button1\",children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:function onClick(){return setOpenSignIn(true);},children:\"Log In\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:function onClick(){return setOpenSignUp(true);},children:\"Sign Up\"})]})]}),/*#__PURE__*/_jsx(Modal,{open:openSignUp,onClose:function onClose(){return setOpenSignUp(false);},children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__modalForm\",children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:email,onChange:function onChange(event){return setEmail(event.target.value);},placeholder:\"Enter your Email\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:username,onChange:function onChange(event){return setUsername(event.target.value);},placeholder:\"Enter Username\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);},placeholder:\"Enter Password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:signUp,color:\"primary\",variant:\"contained\",children:\"Sign Up\"})]})})}),/*#__PURE__*/_jsx(Modal,{open:openSignIn,onClose:function onClose(){return setOpenSignIn(false);},children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__modalForm\",children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:email,onChange:function onChange(event){return setEmail(event.target.value);},placeholder:\"Enter your Email\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);},placeholder:\"Enter Password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:signIn,color:\"primary\",variant:\"contained\",children:\"Log In\"})]})})})]});}export default App;","map":{"version":3,"sources":["/home/ahmad/University/JavaScript/messenger-clone/src/App.js"],"names":["React","useState","useEffect","Button","Input","InputLabel","Modal","FormControl","Message","db","auth","firebase","FlipMove","SendIcon","IconButton","makeStyles","App","getModalStyle","modalStyle","user","setUser","username","setUsername","email","setEmail","password","setPassword","openSignUp","setOpenSignUp","openSignIn","setOpenSignIn","input","setInput","message","messages","setMessages","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","data","handleChange","event","inp","target","value","sendMessage","preventDefault","add","displayName","timestamp","firestore","FieldValue","serverTimestamp","unsubscribe","onAuthStateChanged","authUser","signUp","createUserWithEmailAndPassword","then","updateProfile","catch","error","alert","signIn","signInWithEmailAndPassword","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","classes","signOut"],"mappings":"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","sourcesContent":["import './App.css';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Button, Input, InputLabel, Modal } from '@material-ui/core';\nimport { FormControl } from '@material-ui/core';\nimport Message from './Components/Message';\nimport { db, auth } from './firebase';\nimport firebase from 'firebase'\nimport FlipMove from 'react-flip-move';\nimport SendIcon from '@material-ui/icons/Send';\nimport { IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nfunction App() {\n  const [modalStyle] = React.useState(getModalStyle);\n  const [user, setUser] = useState(null);\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [openSignUp, setOpenSignUp] = useState(false);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([{ username: '', message: '' }]);\n\n  useEffect(() => {\n    db.collection('messages').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n      setMessages(snapshot.docs.map(doc => ({ id: doc.id, message: doc.data() })))\n    })\n  }, [])\n\n  const handleChange = (event) => {\n    const inp = event.target.value;\n    setInput(inp);\n  }\n  const sendMessage = (event) => {\n    event.preventDefault();\n    // To Add messages Locally\n    // setMessages([...messages, {username:username, text:input}]);\n\n    //To add messages from Database\n    db.collection('messages').add({\n      message: input,\n      username: user?.displayName,\n      email: user?.email,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n    setInput('');\n  }\n\n  useEffect(()=>{\n    const unsubscribe = auth.onAuthStateChanged((authUser)=>{\n      if(authUser) {\n        setUser(authUser)\n      } else {\n        setUser(null);\n      }\n    })\n    return ()=>{\n      unsubscribe();\n    }\n  },[])\n\n  const signUp = (event)=>{\n    event.preventDefault()\n    auth.createUserWithEmailAndPassword(email, password)\n    .then((authUser)=>{return authUser.user.updateProfile({displayName: username})})\n    .catch((error)=>{alert(error.message)})\n    setOpenSignUp(false);\n    setEmail('');\n    setUsername('');\n    setPassword('');\n  }\n  \n  const signIn = (event)=>{\n    event.preventDefault()\n    auth.signInWithEmailAndPassword(email, password)\n    .catch((error)=>alert(error.message));\n    setOpenSignIn(false);\n    setEmail('');\n    setPassword('');\n  }\n  \n  // ******************************Material Ui Modal styling******************************\n  function getModalStyle() {\n    const top = 50;\n    const left = 50;\n    \n    return {\n      top: `${top}%`,\n      left: `${left}%`,\n      transform: `translate(-${top}%, -${left}%)`,\n    };\n  }\n  const useStyles = makeStyles((theme) => ({\n    paper: {\n      position: 'absolute',\n      width: 400,\n      backgroundColor: theme.palette.background.paper,\n      border: '2px solid #000',\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2, 4, 3),\n    },\n  }));\n  const classes = useStyles();\n  // ******************************************************************************************\n  \n  return(\n    <div>\n      {\n        user?(\n          <>\n            <div className=\"App\">\n            <div className='app__header'>\n              <img src='https://seeklogo.com/images/F/facebook-messenger-logo-36376366E2-seeklogo.com.png?w=100&h=100' alt='logo'/>\n              <h1>Messenger Clone ðŸ”¥ðŸ”¥</h1>\n              <h2>Welcome {user?.displayName}</h2>\n            </div>\n            <div className='app__button2'>\n              <Button color='primary' variant='contained' onClick={()=>auth.signOut()}>Log Out</Button>\n            </div>\n            <form className='app__form'>\n              <FormControl className='app__formControl'>\n                <InputLabel className='app__inputLabel'>Type Message</InputLabel>\n                <Input value={input} onChange={handleChange} />\n                <IconButton className='app__button' disabled={!input} type='submit' onClick={sendMessage} color='primary' variant='contained'>\n                  <SendIcon />\n                </IconButton>\n                {/* <Button className='app__button' disabled={!input} type='submit' onClick={sendMessage} color='primary' variant='contained'>Send</Button> */}\n              </FormControl>\n            </form>\n            <FlipMove>\n              {\n                messages.map(({ id, message }) => (<Message key={id} username={user?.displayName} email={user?.email} user={user} message={message} />))\n              }\n            </FlipMove>\n          </div>\n          </>\n        ):(\n          <>\n            <div className='app__header'>\n              <img src='https://seeklogo.com/images/F/facebook-messenger-logo-36376366E2-seeklogo.com.png?w=100&h=100' alt='logo'/>\n              <h1>Messenger Clone ðŸ”¥ðŸ”¥</h1>\n              <h1>Sign Up for free or Sign In to Chat ðŸ”¥ðŸ”¥</h1>\n            </div>\n            <div className='app__button1'>\n              <Button color='primary' variant='contained' onClick={()=>setOpenSignIn(true)}>Log In</Button>\n              <Button color='primary' variant='contained' onClick={()=>setOpenSignUp(true)}>Sign Up</Button>\n            </div>\n          </>\n        )\n      }\n\n\n\n\n\n      {/* Material Ui Modal */}\n\n      <Modal\n        open={openSignUp}\n        onClose={() => setOpenSignUp(false)}\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className='app__modalForm'>\n            <Input type='text' value={email} onChange={(event) => setEmail(event.target.value)} placeholder='Enter your Email' />\n            <Input type='text' value={username} onChange={(event) => setUsername(event.target.value)} placeholder='Enter Username' />\n            <Input type='password' value={password} onChange={(event) => setPassword(event.target.value)} placeholder='Enter Password' />\n            <Button type='submit' onClick={signUp} color='primary' variant='contained'>Sign Up</Button>\n          </form>\n        </div>\n      </Modal>\n\n      <Modal\n        open={openSignIn}\n        onClose={() => setOpenSignIn(false)}\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className='app__modalForm'>\n            <Input type='text' value={email} onChange={(event) => setEmail(event.target.value)} placeholder='Enter your Email' />\n            <Input type='password' value={password} onChange={(event) => setPassword(event.target.value)} placeholder='Enter Password' />\n            <Button type='submit' onClick={signIn} color='primary' variant='contained'>Log In</Button>\n          </form>\n        </div>\n      </Modal>\n\n      {/* ******************** */}\n\n      \n    </div>\n  )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}